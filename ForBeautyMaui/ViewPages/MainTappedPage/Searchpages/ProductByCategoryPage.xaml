<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
    xmlns:models="clr-namespace:ForBeauty.Models"
    xmlns:ffimageloading="clr-namespace:FFImageLoading.Maui;assembly=FFImageLoading.Maui"
    x:Class="ForBeautyMaui.ViewPages.MainTappedPage.Searchpages.ProductByCategoryPage">
    <Shell.TitleView>
    <Grid>
        <Label Text="{Binding TitleName}"
           HorizontalOptions="Center"
           VerticalOptions="Center"
           FontFamily="times"
               FontSize="Medium"/>
    </Grid>
</Shell.TitleView>
    <ContentPage.Content>
        <Grid>
            <CollectionView x:Name="ProductListHomePage" VerticalScrollBarVisibility="Always"
                                SelectionMode="Single"
                                FlowDirection="RightToLeft"
                                ItemsSource="{Binding ProductListSource}"
                                SelectedItem="{Binding ProductListSelectedItem}">
                    <CollectionView.ItemsLayout>
                        <GridItemsLayout Span="2"
                                            Orientation="Vertical"
                                         HorizontalItemSpacing="7"/>
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:Product" >
                        <Border Stroke="White"
            StrokeThickness="1"
            BackgroundColor="White"
            Margin="5"
            Padding="5"
            HeightRequest="245"
            StrokeShape="RoundRectangle 10">

                            <VerticalStackLayout Spacing="4">

                                <!-- Image -->
                                <ffimageloading:CachedImage 
                Source="{Binding imageUrl}" 
                HeightRequest="140"
                Aspect="AspectFill"
                DownsampleToViewSize="True"
                DownsampleUseDipUnits="True"
                CacheType="All"
                LoadingPlaceholder="placeholder_image.jpg" />

                                <!-- Name -->
                                <Label Text="{Binding name}" FontSize="Medium" FontFamily="times" />

                                <!-- More Details -->
                                <Label Text="{Binding MoreDital}" FontSize="Small" FontFamily="times" />

                                <!-- Price -->
                                <HorizontalStackLayout IsVisible="{Binding IsPriceVisible}" Spacing="2">
                                    <Label Text="{Binding price}" TextColor="#555555" />
                                    <Label Text="د.ل" TextColor="#555555" />
                                </HorizontalStackLayout>

                                <!-- Discount -->
                                <HorizontalStackLayout IsVisible="{Binding IsDiscountVisible}" Spacing="2">
                                    <Label Text="{Binding discount}" TextColor="Green" />
                                    <Label Text="د.ل" TextColor="Green" />
                                </HorizontalStackLayout>

                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>

                </CollectionView.ItemTemplate>
                    </CollectionView>

       
             
           
            </Grid>
    </ContentPage.Content>
</ContentPage>

